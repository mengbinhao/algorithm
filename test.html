<!DOCTYPE html>

<head>
  <title>test</title>
</head>

<body>
  <ul id="box"></ul>
</body>
<script type="text/javascript">
  const ul = document.querySelector('#box')
  const totalCount = 1010
  const pageCount = 100
  const totalPage = Math.ceil(totalCount / pageCount)

  function loop(curTotal, curIdx, curPage) {
    if (curTotal < 0) return
    const curPageCount = Math.min(curTotal, pageCount)
    let fragment = document.createDocumentFragment()
    window.requestAnimationFrame(() => {
      for (let i = 0; i < curPageCount; i++) {
        const li = document.createElement('li')
        li.innerText = `total idx is ${curPage * pageCount + i + 1}, 这是第${curPage + 1
          }页的第${i + 1}个`
        fragment.appendChild(li)
        // console.log(
        // 	`total idx is ${curPage * pageCount + i + 1}, 这是第${
        // 		curPage + 1
        // 	}页的第${i + 1}个`
        // )
      }
      ul.appendChild(fragment)
      loop(curTotal - curPageCount, curIdx + curPageCount, curPage + 1)
    })
  }

  loop(totalCount, 0, 0)

</script>

</html>